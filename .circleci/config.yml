version: 2.1
setup: true     
orbs:
  path-filtering: circleci/path-filtering@0.0.2
parameters:
  system:
    type: string
    default: "act"
workflows:
  setup-workflow:
    jobs:
      - path-filtering/filter:
          base-revision: << pipeline.git.branch >>
          config-path: .circleci/sub_config.yml
          mapping: |
            << pipeline.parameters.system >>-rest-api/.*               rest-api_container_build                        true
            << pipeline.parameters.system >>-async-api-consumer/.*     async-api-consumer_container_build              true
            << pipeline.parameters.system >>-event-api-consumer/.*     event-api-consumer_container_build              true
            << pipeline.parameters.system >>-batch/.*                  batch_container_build                           true
